#!/usr/bin/env sh
. "$(dirname "$0")/_/husky.sh"

echo "ğŸ§¹ Running pre-commit checks..."

# ĞŸÑ€Ğ¾Ğ²ĞµÑ€ÑĞµĞ¼ ÑƒÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ»ĞµĞ½ Ğ»Ğ¸ lint-staged
if command -v npx >/dev/null 2>&1; then
    if npx --yes lint-staged >/dev/null 2>&1; then
        echo "ğŸ“¦ Running lint-staged..."
        npx lint-staged
    else
        echo "âš ï¸  lint-staged not found, running basic checks"
        npx eslint --fix src/ || true
    fi
else
    echo "âŒ npx not available"
    exit 1
fi

# ĞŸÑ€Ğ¾Ğ²ĞµÑ€ÑĞµĞ¼ Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚
if [ $? -ne 0 ]; then
    echo "âŒ Pre-commit checks failed! Please fix the issues."
    exit 1
fi

echo "âœ… Pre-commit checks passed!"